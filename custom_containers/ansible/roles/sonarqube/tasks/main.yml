- name: Ensure docker network exists (local to this host)
  community.docker.docker_network:
    name: "{{ docker_network }}"
    state: present

- name: Run SonarQube container
  community.docker.docker_container:
    name: sonarqube
    image: sonarqube:community
    published_ports: "{{ sonar_ports }}"
    volumes:
      - sonarqube_data:/opt/sonarqube/data
      - sonarqube_extensions:/opt/sonarqube/extensions
    env:
      SONAR_ES_BOOTSTRAP_CHECKS_DISABLE: "true"
    networks:
      - name: "{{ docker_network }}"
    restart_policy: unless-stopped
